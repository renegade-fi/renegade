services:
  sequencer:
    build:
      context: https://github.com/0xSpaceShard/starknet-devnet.git
      dockerfile: Dockerfile
    ports:
      - "5050:5050"
    healthcheck:
      test: "wget --no-verbose --tries=1 --spider http://localhost:5050/is_alive || exit 1"
      interval: 5s
      timeout: 10s
      retries: 3
  relayer:
    image: task-driver-integration-test:latest
    build: .
    ports:
      - "8000:8000"
    command: >
      cargo test --test integration --
        --verbose
    tty: true
    depends_on:
      sequencer:
        condition: service_healthy
